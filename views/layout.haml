!!!
%html{:lang => "en-au"}
  %head
    %meta{:"http-equiv" => "Content-Type", :content => "text/html; charset=utf-8"}
    
    /[if IE < 8]
      %script{:src => "http://html5shiv.googlecode.com/svn/trunk/html5.js"}

    %title= (@title != "Lachstock" ? "#{@title} at Lachstock" : "Lachlan Hardy Presents: Lachstock^3")

    %link{:rel => "icon", :href => versioned_favicon, :type => "image/x-icon"}
        
    %link{ :rel => "alternate", :type => "application/atom+xml", :title => "Lachstock Articles", :href => "/articles/feed/"}
    %link{ :rel => "alternate", :type => "application/atom+xml", :title => "Lachstock Code", :href => "/code/feed/"}
    
    - if options.environment == :production
      %link{:href => versioned_stylesheet("production/minified"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}
    - else
      %link{:href => versioned_stylesheet("pure"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}
      %link{:href => versioned_stylesheet("pure-skin"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}
      %link{:href => versioned_stylesheet("app"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}
      %link{:href => versioned_stylesheet("codehighlighter"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}

    / OpenID 
    /  see http://claimid.com/openid for how
    /  I think ClaimID might be dead, but I've yet to find a solution I'd like to switch to.
    %link{:rel => "openid.server", :href => "http://openid.claimid.com/server"}
    %link{:rel => "openid.delegate", :href => "http://openid.claimid.com/lachlanhardy"}

    / Googly verification
    %meta{:name => "verify-v1", :content => "Ai0t9Ys7j76GMrjSEP+rDLIhtNL/ruGT8Lu9frCnBUg="}

  %body{:id => "lachstock-com-au", :class => "pure-skin-mine"}
    #wrapper
      = nav_builder
      #page.pure-g-r
        - unless @layout
          %section.pure-u-3-5
            - unless @name.nil?
              %article.hentry
                = partial :post_title
                - if @category == "code"
                  = code_download
                .entry-content
                  = yield
              = comment_builder
            - else
              = yield
          %aside.pure-u-1-5= tag_builder
        - else
          = yield
    %footer.layout
      %p 
        I write 
        %a{:href => "http://validator.w3.org/check?uri=http%3A%2F%2Flachstock.com.au"} HTML 5
        and
        %a{:href => "http://jigsaw.w3.org/css-validator/validator?profile=css3&warning=0&uri=http%3A%2F%2Flachstock.com.au%2F"} CSS 3

  - if options.environment == :production
    %script{:src => versioned_javascript("production/minified"), :type => "text/javascript"}=""
  - else
    / Adding Dan Webb's Code Highlighter
    %script{:src => versioned_javascript("code_highlighter"), :type => "text/javascript"}=""

    / Adding Code Highlighter - CSS
    %script{:src => versioned_javascript("codehighlighter-css"), :type => "text/javascript"}=""

    / Adding Code Highlighter - HTML
    %script{:src => versioned_javascript("codehighlighter-html"), :type => "text/javascript"}=""

    / Adding Code Highlighter - JavaScript
    %script{:src => versioned_javascript("codehighlighter-javascript"), :type => "text/javascript"}=""

    / Adding Code Highlighter - Ruby
    %script{:src => versioned_javascript("codehighlighter-ruby"), :type => "text/javascript"}=""


  :javascript
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '4eefaf4bf5a1f5442a000006');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();