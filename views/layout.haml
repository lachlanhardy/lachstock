!!!
%html
  %head
    %meta{:charset => "UTF-8"}
    %meta{:"http-equiv" => "content-language", :content => "en-au"}
    
    /[if IE]
      %script{:src => "http://html5shiv.googlecode.com/svn/trunk/html5.js"}

    %title= (@title != "Lachstock" ? "#{@title} at Lachstock" : "Lachlan Hardy Presents: Lachstock")
    
    - if options.environment == :production
      %link{:href => versioned_stylesheet("production/minified"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}
    - else
      %link{:href => versioned_stylesheet("reset"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}
      %link{:href => versioned_stylesheet("main"), :media => "screen, projection", :rel => "stylesheet", :type => "text/css"}

    %link{:rel => "icon", :href => versioned_favicon, :type => "image/x-icon"}
        
    %link{ :rel => "alternate", :type => "application/atom+xml", :title => "Lachstock Articles", :href => "/feeds/articles/"}
    
    / OpenID 
    /  see http://claimid.com/openid for how
    /  I think ClaimID might be dead, but I've yet to find a solution I'd like to switch to.
    %link{:rel => "openid.server", :href => "http://openid.claimid.com/server"}
    %link{:rel => "openid.delegate", :href => "http://openid.claimid.com/lachlanhardy"}

    / MicroID see http://microid.org/
    %meta{:name => "microid", :content => "mailto+http:sha1:f76498744c6c558b7c789508580f8b4d893e4d95"}
    
    / Googly verification
    %meta{:name => "verify-v1", :content => "Ai0t9Ys7j76GMrjSEP+rDLIhtNL/ruGT8Lu9frCnBUg="}

  %body{:id => "lachstock-com-au", :class => (@layout ? @layout : (@category == "*" ? "tags" : @category))}
    #wrapper
      %header.layout
        %h1
          = home_link("Lachstock")
        %p less is the new more.
      = nav_builder
      #page
        - unless @layout
          %p.category= "#{@category_title}:"
          %section
            - unless @name.nil?
              %article.hentry
                = partial :post_title
                = tag_builder
                .entry-content
                  = yield
              = comment_builder
            - else
              = yield
        - else
          = yield
    %footer.layout
      %p 
        I write 
        %a{:href => "http://validator.w3.org/check?uri=http%3A%2F%2Flachstock.com.au"} HTML 5
        and
        %a{:href => "http://jigsaw.w3.org/css-validator/validator?profile=css3&warning=0&uri=http%3A%2F%2Flachstock.com.au%2F"} CSS 3

    - if options.environment == :production
      %script{:src => versioned_javascript("production/minified"), :type => "text/javascript"}=""
    - else
      / Sexy JS CDN from Lindsay Evans - http://jscdn.net/ (You've got to admire the front of a man willing to compete with the Google)
      / %script{:src => "http://jscdn.net/jquery-1.3.2.js"}
      %script{:src => versioned_javascript("jquery-1.3.2.min"), :type => "text/javascript"}=""

      / John Resig's sexy little Pretty Date http://ejohn.org/projects/javascript-pretty-date
      %script{:src => versioned_javascript("pretty-date"), :type => "text/javascript"}=""

      / Adding Raphael for vector graphics hotness - http://raphaeljs.com
      %script{:src => versioned_javascript("raphael-min"), :type => "text/javascript"}=""
    
      / And g.Raphael too! - http://g.raphaeljs.com
      %script{:src => versioned_javascript("g.raphael-min"), :type => "text/javascript"}=""
    
      / And g.pie! - http://g.raphaeljs.com
      %script{:src => versioned_javascript("g.pie-min"), :type => "text/javascript"}=""
    
      / my delicious graphs
      %script{:src => versioned_javascript("graphing"), :type => "text/javascript"}=""

      / Adding Twitter status
      %script{:src => versioned_javascript("status"), :type => "text/javascript"}=""

      / Adding Github commits
      %script{:src => versioned_javascript("github-activity"), :type => "text/javascript"}=""

      / Adding Flickr pic
      %script{:src => versioned_javascript("flickr-pic"), :type => "text/javascript"}=""

      / Run site scripts
      %script{:src => versioned_javascript("go"), :type => "text/javascript"}=""
