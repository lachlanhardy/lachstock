(function(){Raphael.fn.g=Raphael.fn.g||{};Raphael.fn.g.markers={disc:"disc",o:"disc",square:"square",s:"square",triangle:"triangle",t:"triangle",star:"star","*":"star",cross:"cross",x:"cross",plus:"plus","+":"plus",arrow:"arrow","->":"arrow"};Raphael.fn.g.txtattr={font:"12px Arial, sans-serif"};Raphael.fn.g.colors=[];var b=[0.6,0.2,0.05,0.1333,0.75,0];for(var a=0;a<10;a++){if(a<b.length){Raphael.fn.g.colors.push("hsb("+b[a]+", .75, .75)")}else{Raphael.fn.g.colors.push("hsb("+b[a-b.length]+", 1, .5)")}}Raphael.fn.g.text=function(f,c,e){return this.text(f,c,e).attr(this.g.txtattr)};Raphael.fn.g.labelise=function(f,c,e){if(f){return(f+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(i,g,h){if(g){return(+c).toFixed(g.replace(/^#+\.?/g,"").length)}if(h){return(c*100/e).toFixed(h.replace(/^%+\.?/g,"").length)+"%"}})}else{return(+c).toFixed(0)}};Raphael.fn.g.finger=function(i,j,c,h,m,l,k){if((m&&!h)||(!m&&!c)){return k?"":this.path()}l={square:"square",sharp:"sharp",soft:"soft"}[l]||"round";var f;h=Math.round(h);c=Math.round(c);i=Math.round(i);j=Math.round(j);switch(l){case"round":if(!m){var e=Math.floor(h/2);if(c<e){e=c;f=["M",i+0.5,j+0.5-Math.floor(h/2),"l",0,0,"a",e,Math.floor(h/2),0,0,1,0,h,"l",0,0,"z"]}else{f=["M",i+0.5,j+0.5-e,"l",c-e,0,"a",e,e,0,1,1,0,h,"l",e-c,0,"z"]}}else{var e=Math.floor(c/2);if(h<e){e=h;f=["M",i-Math.floor(c/2)+0.001,j+0.001,"l",0,0,"a",Math.floor(c/2),e,0,0,1,c,0,"l",0,0,"z"]}else{f=["M",i-e+0.001,j+0.001,"l",0,e-h,"a",e,e,0,1,1,c,0,"l",0,h-e,"z"]}}break;case"sharp":if(!m){var g=Math.floor(h/2);f=["M",i+0.5,j+0.5+g,"l",0,-h,Math.max(c-g,0),0,Math.min(g,c),g,-Math.min(g,c),g+(g*2<h),"z"]}else{var g=Math.floor(c/2);f=["M",i+g+0.001,j+0.001,"l",-c,0,0,-Math.max(h-g,0),g,-Math.min(g,h),g,Math.min(g,h),g,"z"]}break;case"square":if(!m){f=["M",i,j+Math.floor(h/2),"l",0,-h,c,0,0,h,"z"]}else{f=["M",i+0.001+Math.floor(c/2),j-0.001,"l",1-c,0,0,-h,c-1,0,"z"]}break;case"soft":var e;if(!m){e=Math.min(c,Math.round(h/5));f=["M",i+0.5,j+0.5-Math.floor(h/2),"l",c-e,0,"a",e,e,0,0,1,e,e,"l",0,h-e*2,"a",e,e,0,0,1,-e,e,"l",e-c,0,"z"]}else{e=Math.min(Math.round(c/5),h);f=["M",i-Math.floor(c/2),j,"l",0,e-h,"a",e,e,0,0,1,e,-e,"l",c-2*e,0,"a",e,e,0,0,1,e,e,"l",0,h-e,"z"]}}if(k){return f.join(",")}else{return this.path(f)}};Raphael.fn.g.disc=function(f,c,e){return this.circle(f,c,e)};Raphael.fn.g.line=function(f,c,e){return this.rect(f-e,c-e/5,2*e,2*e/5)};Raphael.fn.g.square=function(f,c,e){e=e*0.7;return this.rect(f-e,c-e,2*e,2*e)};Raphael.fn.g.triangle=function(f,c,e){e*=1.75;return this.path("M".concat(f,",",c,"m0-",e*0.58,"l",e*0.5,",",e*0.87,"-",e,",0z"))};Raphael.fn.g.star=function(j,c,e,i){i=i||e*0.5;var f=["M",j,c+i,"L"],g;for(var h=1;h<10;h++){g=h%2?e:i;f=f.concat([(j+g*Math.sin(h*Math.PI*0.2)).toFixed(3),(c+g*Math.cos(h*Math.PI*0.2)).toFixed(3)])}f.push("z");return this.path(f)};Raphael.fn.g.cross=function(f,c,e){e=e/2.5;return this.path("M".concat(f-e,",",c,"l",[-e,-e,e,-e,e,e,e,-e,e,e,-e,e,e,e,-e,e,-e,-e,-e,e,-e,-e,"z"]))};Raphael.fn.g.plus=function(f,c,e){e=e/2;return this.path("M".concat(f-e/2,",",c-e/2,"l",[0,-e,e,0,0,e,e,0,0,e,-e,0,0,e,-e,0,0,-e,-e,0,0,-e,"z"]))};Raphael.fn.g.arrow=function(f,c,e){return this.path("M".concat(f-e*0.7,",",c-e*0.4,"l",[e*0.6,0,0,-e*0.4,e,e*0.8,-e,e*0.8,0,-e*0.4,-e*0.6,0],"z"))};Raphael.fn.g.tag=function(k,c,e,f,h){f=f||0;h=h==null?5:h;e=e==null?"$9.99":e;var i=0.5522*h,j=this.set(),g=3;j.push(this.path().attr({fill:"#000",stroke:"none"}));j.push(this.text(k,c,e).attr(this.g.txtattr).attr({fill:"#fff"}));j.update=function(){this.rotate(0,k,c);var l=this[1].getBBox();if(l.height>=h*2){this[0].attr({path:["M",k,c+h,"a",h,h,0,1,1,0,-h*2,h,h,0,1,1,0,h*2,"m",0,-h*2-g,"a",h+g,h+g,0,1,0,0,(h+g)*2,"L",k+h+g,c+l.height/2+g,"l",l.width+2*g,0,0,-l.height-2*g,-l.width-2*g,0,"L",k,c-h-g].join(",")})}else{var m=Math.sqrt(Math.pow(h+g,2)-Math.pow(l.height/2+g,2));this[0].attr({path:["M",k,c+h,"c",-i,0,-h,i-h,-h,-h,0,-i,h-i,-h,h,-h,i,0,h,h-i,h,h,0,i,i-h,h,-h,h,"M",k+m,c-l.height/2-g,"a",h+g,h+g,0,1,0,0,l.height+2*g,"l",h+g-m+l.width+2*g,0,0,-l.height-2*g,"L",k+m,c-l.height/2-g].join(",")})}this[1].attr({x:k+h+g+l.width/2,y:c});f=(360-f)%360;this.rotate(f,k,c);f>90&&f<270&&this[1].attr({x:k-h-g-l.width/2,y:c,rotation:[180+f,k,c]});return this};j.update();return j};Raphael.fn.g.popupit=function(l,m,k,c,f){c=c==null?2:c;f=f||5;l=Math.round(l)+0.5;m=Math.round(m)+0.5;var n=k.getBBox(),j=Math.round(n.width/2),o=Math.round(n.height/2),g=[0,j+f*2,0,-j-f*2],i=[-o*2-f*3,-o-f,0,-o-f],e=["M",l-g[c],m-i[c],"l",-f,(c==2)*-f,-Math.max(j-f,0),0,"a",f,f,0,0,1,-f,-f,"l",0,-Math.max(o-f,0),(c==3)*-f,-f,(c==3)*f,-f,0,-Math.max(o-f,0),"a",f,f,0,0,1,f,-f,"l",Math.max(j-f,0),0,f,!c*-f,f,!c*f,Math.max(j-f,0),0,"a",f,f,0,0,1,f,f,"l",0,Math.max(o-f,0),(c==1)*f,f,(c==1)*-f,f,0,Math.max(o-f,0),"a",f,f,0,0,1,-f,f,"l",-Math.max(j-f,0),0,"z"].join(","),h=[{x:l,y:m+f*2+o},{x:l-f*2-j,y:m},{x:l,y:m-f*2-o},{x:l+f*2+j,y:m}][c];k.translate(h.x-j-n.x,h.y-o-n.y);return this.path(e).attr({fill:"#000",stroke:"none"}).insertBefore(k.node?k:k[0])};Raphael.fn.g.popup=function(j,c,e,i,g){i=i==null?2:i;g=g||5;e=e||"$9.99";var h=this.set(),f=3;h.push(this.path().attr({fill:"#000",stroke:"none"}));h.push(this.text(j,c,e).attr(this.g.txtattr).attr({fill:"#fff"}));h.update=function(s,t,q){s=s||j;t=t||c;var o=this[1].getBBox(),n=o.width/2,p=o.height/2,k=[0,n+g*2,0,-n-g*2],m=[-p*2-g*3,-p-g,0,-p-g],u=["M",s-k[i],t-m[i],"l",-g,(i==2)*-g,-Math.max(n-g,0),0,"a",g,g,0,0,1,-g,-g,"l",0,-Math.max(p-g,0),(i==3)*-g,-g,(i==3)*g,-g,0,-Math.max(p-g,0),"a",g,g,0,0,1,g,-g,"l",Math.max(n-g,0),0,g,!i*-g,g,!i*g,Math.max(n-g,0),0,"a",g,g,0,0,1,g,g,"l",0,Math.max(p-g,0),(i==1)*g,g,(i==1)*-g,g,0,Math.max(p-g,0),"a",g,g,0,0,1,-g,g,"l",-Math.max(n-g,0),0,"z"].join(","),l=[{x:s,y:t+g*2+p},{x:s-g*2-n,y:t},{x:s,y:t-g*2-p},{x:s+g*2+n,y:t}][i];if(q){this[0].animate({path:u},500,">");this[1].animate(l,500,">")}else{this[0].attr({path:u});this[1].attr(l)}return this};return h.update(j,c)};Raphael.fn.g.flag=function(i,c,e,f){f=f||0;e=e||"$9.99";var h=this.set(),g=3;h.push(this.path().attr({fill:"#000",stroke:"none"}));h.push(this.text(i,c,e).attr(this.g.txtattr).attr({fill:"#fff"}));h.update=function(m,j){this.rotate(0,m,j);var k=this[1].getBBox(),l=k.height/2;this[0].attr({path:["M",m,j,"l",l+g,-l-g,k.width+2*g,0,0,k.height+2*g,-k.width-2*g,0,"z"].join(",")});this[1].attr({x:m+l+g+k.width/2,y:j});f=360-f;this.rotate(f,m,j);f>90&&f<270&&this[1].attr({x:m-r-g-k.width/2,y:j,rotation:[180+f,m,j]});return this};return h.update(i,c)};Raphael.fn.g.label=function(g,c,e){var f=this.set();f.push(this.rect(g,c,10,10).attr({stroke:"none",fill:"#000"}));f.push(this.text(g,c,e).attr(this.g.txtattr).attr({fill:"#fff"}));f.update=function(){var h=this[1].getBBox(),i=Math.min(h.width+10,h.height+10)/2;this[0].attr({x:h.x-i/2,y:h.y-i/2,width:h.width+i,height:h.height+i,r:i})};f.update();return f};Raphael.fn.g.labelit=function(c){var e=c.getBBox(),f=Math.min(20,e.width+10,e.height+10)/2;return this.rect(e.x-f/2,e.y-f/2,e.width+f,e.height+f,f).attr({stroke:"none",fill:"#000"}).insertBefore(c[0])};Raphael.fn.g.drop=function(i,c,e,g,f){g=g||30;f=f||0;var h=this.set();h.push(this.path(["M",i,c,"l",g,0,"A",g*0.4,g*0.4,0,1,0,i+g*0.7,c-g*0.7,"z"]).attr({fill:"#000",stroke:"none",rotation:[22.5-f,i,c]}));f=(f+90)*Math.PI/180;h.push(this.text(i+g*Math.sin(f),c+g*Math.cos(f),e).attr(this.g.txtattr).attr({"font-size":g*12/30,fill:"#fff"}));h.drop=h[0];h.text=h[1];return h};Raphael.fn.g.blob=function(j,c,e,f){var f=(+f+1?f:45)+90,h=12,k=Math.PI/180,g=h*12/12;var i=this.set();i.push(this.path().attr({fill:"#000",stroke:"none"}));i.push(this.text(j+h*Math.sin((f)*k),c+h*Math.cos((f)*k)-g/2,e).attr(this.g.txtattr).attr({"font-size":g,fill:"#fff"}));i.update=function(u,v,p){u=u||j;v=v||c;var n=this[1].getBBox(),C=Math.max(n.width+g,h*25/12),o=Math.max(n.height+g,h*25/12),z=u+h*Math.sin((f-22.5)*k),m=v+h*Math.cos((f-22.5)*k),w=u+h*Math.sin((f+22.5)*k),l=v+h*Math.cos((f+22.5)*k),y=(w-z)/2,B=(l-m)/2,x=C/2,A=o/2,q=-Math.sqrt(Math.abs(x*x*A*A-x*x*B*B-A*A*y*y)/(x*x*B*B+A*A*y*y)),s=q*x*B/A+(w+z)/2,t=q*-A*y/x+(l+m)/2;if(p){this.animate({x:s,y:t,path:["M",j,c,"L",w,l,"A",x,A,0,1,1,z,m,"z"].join(",")},500,">")}else{this.attr({x:s,y:t,path:["M",j,c,"L",w,l,"A",x,A,0,1,1,z,m,"z"].join(",")})}return this};i.update(j,c);return i};Raphael.fn.g.colorValue=function(c,e,f,g){return"hsb("+[Math.min((1-c/e)*0.4,1),f||0.75,g||0.75]+")"};Raphael.fn.g.snapEnds=function(i,h,j){var l=i,g=h;if(l==g){return{from:l,to:g,power:0}}function f(n){return Math.abs(n-0.5)<0.25?Math.floor(n)+0.5:Math.round(n)}var k=(g-l)/j,e=Math.floor(k),m=e,c=0;if(e){while(m){c--;m=Math.floor(k*Math.pow(10,c))/Math.pow(10,c)}c++}else{while(!e){c=c||1;e=Math.floor(k*Math.pow(10,c))/Math.pow(10,c);c++}c&&c--}var g=f(h*Math.pow(10,c))/Math.pow(10,c);if(g<h){g=f((h+0.5)*Math.pow(10,c))/Math.pow(10,c)}var l=f((i-(c>0?0:0.5))*Math.pow(10,c))/Math.pow(10,c);return{from:l,to:g,power:c}};Raphael.fn.g.axis=function(q,s,w,h,z,ac,y,aa,x,X){X=X==null?2:X;x=x||"t";ac=ac||10;var i=x=="|"||x==" "?["M",q+0.5,s,"l",0,0.001]:y==1||y==3?["M",q+0.5,s,"l",0,-w]:["M",q,s+0.5,"l",w,0],o=this.g.snapEnds(h,z,ac),ab=o.from,m=o.to,ad=o.power,f=0,l=this.set();d=(m-ab)/ac;var t=ab,u=ad>0?ad:0;p=w/ac;if(+y==1||+y==3){var B=s,n=(y-1?1:-1)*(X+3+!!(y-1));while(B>=s-w){x!="-"&&x!=" "&&(i=i.concat(["M",q-(x=="+"||x=="|"?X:!(y-1)*X*2),B+0.5,"l",X*2+1,0]));l.push(this.text(q+n,B,(aa&&aa[f++])||(Math.round(t)==t?t:+t.toFixed(u))).attr(this.g.txtattr).attr({"text-anchor":y-1?"start":"end"}));t+=d;B-=p}if(Math.round(B+p-(s-w))){x!="-"&&x!=" "&&(i=i.concat(["M",q-(x=="+"||x=="|"?X:!(y-1)*X*2),s-w+0.5,"l",X*2+1,0]));l.push(this.text(q+n,s-w,(aa&&aa[f])||(Math.round(t)==t?t:+t.toFixed(u))).attr(this.g.txtattr).attr({"text-anchor":y-1?"start":"end"}))}}else{var A=q,t=ab,u=ad>0?ad:0,n=(y?-1:1)*(X+9+!y),p=w/ac,k=0,j=0;while(A<=q+w){x!="-"&&x!=" "&&(i=i.concat(["M",A+0.5,s-(x=="+"?X:!!y*X*2),"l",0,X*2+1]));l.push(k=this.text(A,s+n,(aa&&aa[f++])||(Math.round(t)==t?t:+t.toFixed(u))).attr(this.g.txtattr));var v=k.getBBox();if(j>=v.x-5){l.pop(l.length-1).remove()}else{j=v.x+v.width}t+=d;A+=p}if(Math.round(A-p-q-w)){x!="-"&&x!=" "&&(i=i.concat(["M",q+w+0.5,s-(x=="+"?X:!!y*X*2),"l",0,X*2+1]));l.push(this.text(q+w,s+n,(aa&&aa[f])||(Math.round(t)==t?t:+t.toFixed(u))).attr(this.g.txtattr))}}var Y=this.path(i);Y.text=l;Y.all=this.set([Y,l]);Y.remove=function(){this.text.remove();this.constructor.prototype.remove.call(this)};return Y};Raphael.el.lighter=function(c){c=c||2;var e=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[e[0],e[1]];e[0]=Raphael.rgb2hsb(Raphael.getRGB(e[0]).hex);e[1]=Raphael.rgb2hsb(Raphael.getRGB(e[1]).hex);e[0].b=Math.min(e[0].b*c,1);e[0].s=e[0].s/c;e[1].b=Math.min(e[1].b*c,1);e[1].s=e[1].s/c;this.attr({fill:"hsb("+[e[0].h,e[0].s,e[0].b]+")",stroke:"hsb("+[e[1].h,e[1].s,e[1].b]+")"})};Raphael.el.darker=function(c){c=c||2;var e=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[e[0],e[1]];e[0]=Raphael.rgb2hsb(Raphael.getRGB(e[0]).hex);e[1]=Raphael.rgb2hsb(Raphael.getRGB(e[1]).hex);e[0].s=Math.min(e[0].s*c,1);e[0].b=e[0].b/c;e[1].s=Math.min(e[1].s*c,1);e[1].b=e[1].b/c;this.attr({fill:"hsb("+[e[0].h,e[0].s,e[0].b]+")",stroke:"hsb("+[e[1].h,e[1].s,e[1].b]+")"})};Raphael.el.original=function(){if(this.fs){this.attr({fill:this.fs[0],stroke:this.fs[1]});delete this.fs}}})();